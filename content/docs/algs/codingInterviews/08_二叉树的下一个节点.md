---
title: 08. 二叉树的下一个节点
weight: 10
---
## Description
> 给定一个二叉树其中的一个结点，请找出中序遍历顺序的下一个结点并且返回。注意，树中的结点不仅包含左右子结点，同时包含指向父结点的next指针。下图为一棵有9个节点的二叉树。树中从父节点指向子节点的指针用实线表示，从子节点指向父节点的用虚线表示


## Solutions

一般我们中序遍历都是从根节点开始的，但是这里并没有给出根节点，而是给出了一个要查找的节点。那首先我们可以通过不断的往上走，直到找到根节点，然后进行中序遍历，这样就可以找到我们需要的节点的下一个节点。这里的写法很简单，我们就不上代码了。

那如果我们不找根节点，直接从当前节点开始遍历呢？这里情形就稍微有点复杂了，需要分情况讨论:
 	- 如果当前节点有右节点，则右节点的最左节点就是我们所找的节点
 	- 如果当前节点没有右节点，且当前节点没有父节点，则返回 nil
 	- 如果当前节点没有右节点，当前节点有父节点，且当前节点是父节点的左子节点，则返回当前节点的父节点
 	- 如果当前节点没有右节点，当前节点有父节点，且当前节点是父节点的右子节点，则一路向上查找，直到找到一个节点，这个节点是其父节点的左子节点，返回父节点；如果没有这样的父节点，返回 nil。

下面给出上面第二种方法的代码。
```go
func GetNext(pNode *TreeLinkNode) *TreeLinkNode {
	if pNode == nil {
		return nil
	}

	// 情况一，当前节点的右子树非空，则直接找出当前节点的右子树的最左节点即可
	if pNode.Right != nil {
		pNode = pNode.Right
		for pNode.Left != nil {
			pNode = pNode.Left
		}

		return pNode
	}

	// 情况二，当前节点的右子树为空，且父节点也为空，说明当前节点就是根节点，没有下一个节点，返回 nil 即可。
	if pNode.Next == nil {
		return nil
	}

	// 情况三， 当前节点右子树为空，父节点非空，并且当前节点是其父节点的左节点，那么直接返回其父节点
	if pNode == pNode.Next.Left {
		return pNode.Next
	}

	// 情况四， 当前节点右子树为空，父节点非空，并且当前节点是其父节点的右节点，那么不断向上查找，直到找到一个节点，
	// 这个节点是其父节点的左子节点，那么直接返回这个节点的父节点即可
	for pNode != nil {
		parent := pNode.Next
		if parent.Left == pNode {
			return parent
		}
		pNode = parent
	}

	return nil
}
```
